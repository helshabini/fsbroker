

Create
- this is either a new file or rename/move
    - stat/getId:
      - File exists on disk:
        - query the map by Id
          - Found: rename/move -> add rename (new & old path)
          - Not Found: new file -> add create
      - File doesn't exist on disk:
        - Irrelevant event, file no longer exists -> add noop

Write
  - this is either associated with a create (non-empty) or normal write
    - query the map by path
      - Found: normal write event -> add write
      - Not found: non-empty create -> add create

Rename
  - this is either rename/move or soft delete
    - add rename

Remove
  - this is certainly a hard-delete
    - add delete

Chmod
  - this could be a clear file write (zero bytes)
    - stat/getId:
      - File exists on disk && is zero bytes && wasn't zero bytes (from map by Id) -> add write
    - add chmod


Pass 2 (Map Pairs):
Map Writes and Creates
- In this case, find actions that have the same path (remove from write map, keep in create map)

Map Renames and Creates
- In this case, must search in creates map for an action that has the old path of each rename:
  - Found: This is a rename
  - Not found: This is a remove (rename/move to outside of watch dirs)

Pass 3 (Update Map and Emit):

Process Writes

Process Renames

Process Deletes

Process Creates

Process NoOp
  
